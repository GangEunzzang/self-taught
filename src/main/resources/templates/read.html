<!DOCTYPE html>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    번호 : <input type="text" name="bno" th:value="${dto.bno}"><br>
    제목 : <input type="text" name="title" th:value="${dto.title}" > <br><br>
    내용 : <textarea rows="10" name="content">[[${dto.content}]]</textarea><br>

    <a th:href="@{/modify(bno=${dto.bno})}" class="btn btn-primary">수정</a>
    <a th:href="@{/delete(bno=${dto.bno})}" class="btn btn-primary">삭제</a>

    <ul class="reply-list">

    </ul>
</body>

<script th:inline="javascript">
    $(document).ready(function (){
        let bno = [[${dto.bno}]];

        function getCrudReply(){
            $.getJSON("/crud/" + bno, function (arr){
                console.log(arr);
                let str = "";

                $.each(arr, function (idx, reply) {
                    console.log(reply)

                    str += '<li>';
                    str += '<div>' + reply.content + '</div>';
                    str += '</li>';
                });
                $(".reply-list").html(str);
            });
        };
        getCrudReply();
    });



</script>
</html>